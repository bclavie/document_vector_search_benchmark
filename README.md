# Document Vector Search Benchmark

Benchmark for Japanese document embedding and vector search

# setup

requirements:

- python >=3.9,<3.12
- poetry

required environmental variables:

- `OPENAI_API_KEY` (to use OpenAI's embedding API)
- `COHERE_API_KEY` (to use Cohere's embedding API)

to install all dependencies, perform

```bash
$ make install
```

# run benchmark

Benchmark settings can be controlled through a yaml file. The default configuration can be found in [configs/default.yml](./configs/default.yml).
You can use your own config file in the configs directry by setting the `DVSB_CONFIG_NAME` environmental variable (ex. `default`).

To run benchmark,

```
$ make run_benchmark
```

# result


|    | Model                                                                     |   Recall@1 JSQuAD-v1.1-valid |   Recall@3 JSQuAD-v1.1-valid |   Recall@5 JSQuAD-v1.1-valid |   Recall@10 JSQuAD-v1.1-valid |   Recall@3 MIRACL-v1.0-dev |   Recall@5 MIRACL-v1.0-dev |   Recall@10 MIRACL-v1.0-dev |   Recall@100 MIRACL-v1.0-dev |
|----|---------------------------------------------------------------------------|------------------------------|------------------------------|------------------------------|-------------------------------|----------------------------|----------------------------|-----------------------------|------------------------------|
|  0 | ColBERTRetriever-bclavie/JaColBERTv2                                      |                     0.920756 |                     0.967807 |                     0.976587 |                      0.982665 |                  0.622286  |                   0.713644 |                    0.82424  |                     0.970855 |
|  1 | SentenceTransformerEmbedding-BAAI/bge-m3                                  |                     0.849842 |                     0.939217 |                     0.958577 |                      0.975912 |                  0.686322  |                   0.769516 |                    0.85376  |                     0.980984 |
|  2 | E5Embedding-intfloat/multilingual-e5-large                                |                     0.864926 |                     0.952949 |                     0.965781 |                      0.977488 |                  0.658555  |                   0.741041 |                    0.835273 |                     0.982559 |
|  3 | ColBERTRetriever-bclavie/JaColBERT                                        |                     0.911301 |                     0.961054 |                     0.970059 |                      0.977262 |                  0.555464  |                   0.639378 |                    0.748628 |                     0.933103 |
|  4 | E5Embedding-intfloat/multilingual-e5-base                                 |                     0.838361 |                     0.934039 |                     0.954975 |                      0.972535 |                  0.612025  |                   0.687829 |                    0.798884 |                     0.976868 |
|  5 | E5Embedding-intfloat/multilingual-e5-small                                |                     0.840387 |                     0.933814 |                     0.95385  |                      0.972985 |                  0.59911   |                   0.688636 |                    0.783391 |                     0.972148 |
|  6 | VertexAITextEmbedding-textembedding-gecko-multilingual@001                |                     0.780729 |                     0.904322 |                     0.932463 |                      0.961054 |                  N/A  |                   N/A |                    N/A |                     N/A |
|  7 | VertexAITextEmbedding-textembedding-gecko-multilingual@latest             |                     0.780729 |                     0.904548 |                     0.932238 |                      0.960603 |                  N/A  |                   N/A |                    N/A |                     N/A |
|  8 | OpenAIEmbedding-text-embedding-ada-002                                    |                     0.75394  |                     0.874606 |                     0.906799 |                      0.937866 |                  N/A  |                   N/A |                    N/A |                     N/A |
|  9 | SonoisaSentenceLukeJapanese-sonoisa/sentence-luke-japanese-base-lite      |                     0.652634 |                     0.813147 |                     0.861324 |                      0.908825 |                  0.144617  |                   0.211484 |                    0.297427 |                     0.622732 |
|  10 | SonoisaSentenceBertJapanese-sonoisa/sentence-bert-base-ja-mean-tokens-v2  |                     0.65421  |                     0.810671 |                     0.8629   |                      0.914228 |                  0.170388  |                   0.221441 |                    0.314252 |                     0.660344 |
|  11 | SentenceTransformerEmbedding-pkshatech/GLuCoSE-base-ja                    |                     0.644755 |                     0.798064 |                     0.846466 |                      0.896668 |                  0.472039  |                   0.546962 |                    0.645746 |                     0.861757 |
|  12 | SentenceTransformerEmbedding-cl-nagoya/sup-simcse-ja-base                 |                     0.631923 |                     0.792661 |                     0.848942 |                      0.897118 |                  0.136905  |                   0.185814 |                    0.26734  |                     0.590408 |
| 13 | SentenceTransformerEmbedding-sonoisa/sentence-bert-base-ja-mean-tokens-v2 |                     0.639802 |                     0.782981 |                     0.841288 |                      0.894867 |                  0.203452  |                   0.26437  |                    0.357611 |                     0.708596 |
| 14 | SentenceTransformerEmbedding-cl-nagoya/sup-simcse-ja-large                |                     0.603107 |                     0.776452 |                     0.833408 |                      0.889239 |                  0.154618  |                   0.202999 |                    0.293636 |                     0.584585 |
| 15 | SentenceTransformerEmbedding-cl-nagoya/unsup-simcse-ja-large              |                     0.594777 |                     0.755966 |                     0.8181   |                      0.879559 |                  0.102252  |                   0.142104 |                    0.218686 |                     0.52806  |
| 16 | SentenceTransformerEmbedding-cl-nagoya/unsup-simcse-ja-base               |                     0.577217 |                     0.746961 |                     0.804142 |                      0.870779 |                  0.0963266 |                   0.121559 |                    0.195299 |                     0.500001 |

|    | Model                                                                     |   JSQuAD-v1.1-valid recall@1 |   JSQuAD-v1.1-valid recall@3 |   JSQuAD-v1.1-valid recall@5 |   JSQuAD-v1.1-valid recall@10 | MrTyDi-v1.0-test recall@1   | MrTyDi-v1.0-test recall@3   | MrTyDi-v1.0-test recall@5   | MrTyDi-v1.0-test recall@10   | MIRACL-v1.0-dev recall@1   | MIRACL-v1.0-dev recall@3   | MIRACL-v1.0-dev recall@5   | MIRACL-v1.0-dev recall@10   |
|----|---------------------------------------------------------------------------|------------------------------|------------------------------|------------------------------|-------------------------------|-----------------------------|-----------------------------|-----------------------------|------------------------------|----------------------------|----------------------------|----------------------------|-----------------------------|
|  0 | E5Embedding-intfloat/multilingual-e5-large                                |                     0.86493  |                     0.95295  |                     0.96578  |                      0.97749  | 0.61157                     | 0.81273                     | 0.85625                     | 0.89306                      | 0.3348                     | 0.52176                    | 0.59992                    | 0.69678                     |
|  1 | E5Embedding-intfloat/multilingual-e5-small                                |                     0.84039  |                     0.93381  |                     0.95385  |                      0.97299  | 0.57106                     | 0.76366                     | 0.79421                     | 0.84444                      | 0.28925                    | 0.46448                    | 0.54013                    | 0.64014                     |
|  2 | ColBERTRetriever-bclavie/JaColBERT                                                         |                     0.90567  |                     0.9588   |                     0.96826  |                      0.97794  | 0.56134                     | 0.74444                     | 0.78079                     | 0.82083                      | 0.27699                    | 0.46369                    | 0.54606                    | 0.64494                     |
|  3 | E5Embedding-intfloat/multilingual-e5-base                                 |                     0.83836  |                     0.93404  |                     0.95498  |                      0.97253  | 0.57917                     | 0.77708                     | 0.81505                     | 0.85718                      | 0.31226                    | 0.48195                    | 0.55337                    | 0.63197                     |
|  4 | VertexAITextEmbedding-textembedding-gecko-multilingual@001                |                     0.780729 |                     0.904322 |                     0.932463 |                      0.961054 | ---                         | ---                         | ---                         | ---                          | ---                        | ---                        | ---                        | ---                         |
|  5 | VertexAITextEmbedding-textembedding-gecko-multilingual@latest             |                     0.780729 |                     0.904548 |                     0.932238 |                      0.960603 | ---                         | ---                         | ---                         | ---                          | ---                        | ---                        | ---                        | ---                         |
|  6 | OpenAIEmbedding-text-embedding-ada-002                                    |                     0.75394  |                     0.874606 |                     0.906799 |                      0.937866 | ---                         | ---                         | ---                         | ---                          | ---                        | ---                        | ---                        | ---                         |
|  7 | SentenceTransformerEmbedding-bclavie/fio-base-japanese-v0.1               |                     0.69968  |                     0.84151  |                     0.87933  |                      0.92436  | 0.3912                      | 0.58241                     | 0.64907                     | 0.71157                      | 0.14853                    | 0.27872                    | 0.35786                    | 0.46295                     |
|  8 | SonoisaSentenceBertJapanese-sonoisa/sentence-bert-base-ja-mean-tokens-v2  |                     0.65421  |                     0.81067  |                     0.8629   |                      0.91423  | 0.30116                     | 0.4875                      | 0.54884                     | 0.61157                      | 0.07305                    | 0.17223                    | 0.224                      | 0.33838                     |
|  9 | SonoisaSentenceLukeJapanese-sonoisa/sentence-luke-japanese-base-lite      |                     0.65263  |                     0.81315  |                     0.86132  |                      0.90882  | 0.24282                     | 0.39722                     | 0.47037                     | 0.54352                      | 0.07116                    | 0.15504                    | 0.21505                    | 0.30468                     |
| 10 | SentenceTransformerEmbedding-pkshatech/GLuCoSE-base-ja                    |                     0.64475  |                     0.79806  |                     0.84647  |                      0.89667  | 0.46968                     | 0.61713                     | 0.66921                     | 0.73542                      | 0.2124                     | 0.36852                    | 0.43225                    | 0.51465                     |
| 11 | SentenceTransformerEmbedding-sonoisa/sentence-bert-base-ja-mean-tokens-v2 |                     0.6398   |                     0.78298  |                     0.84129  |                      0.89487  | 0.30417                     | 0.45417                     | 0.525                       | 0.59861                      | 0.09431                    | 0.1966                     | 0.25401                    | 0.3543                      |
| 12 | SentenceTransformerEmbedding-cl-nagoya/sup-simcse-ja-base                 |                     0.63192  |                     0.79266  |                     0.84894  |                      0.89712  | 0.28866                     | 0.45417                     | 0.51435                     | 0.58032                      | 0.05196                    | 0.13299                    | 0.17717                    | 0.26391                     |
| 13 | SentenceTransformerEmbedding-cl-nagoya/sup-simcse-ja-large                |                     0.60311  |                     0.77645  |                     0.83341  |                      0.88924  | 0.29329                     | 0.45856                     | 0.51736                     | 0.58102                      | 0.07263                    | 0.15921                    | 0.21258                    | 0.29529                     |
| 14 | SentenceTransformerEmbedding-cl-nagoya/unsup-simcse-ja-large              |                     0.59478  |                     0.75597  |                     0.8181   |                      0.87956  | 0.21574                     | 0.36134                     | 0.40556                     | 0.48287                      | 0.05774                    | 0.11392                    | 0.15792                    | 0.23963                     |
| 15 | SentenceTransformerEmbedding-cl-nagoya/unsup-simcse-ja-base               |                     0.57722  |                     0.74696  |                     0.80414  |                      0.87078  | 0.18495                     | 0.31528                     | 0.38264                     | 0.46875                      | 0.04061                    | 0.11226                    | 0.15183                    | 0.22628                     |
